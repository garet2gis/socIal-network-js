{"version":3,"sources":["components/Dialogs/DialogItem/DialogItem.js","components/Dialogs/Message/Message.js","components/Dialogs/DialogsForm/DialogsForm.js","components/Dialogs/DialogsStyled.js","components/Dialogs/Dialogs.js","hoc/withAuthRedirect.js","components/Dialogs/DialogsContainer.js"],"names":["DialogItemStyled","styled","div","props","theme","colorPalettes","second","body","media","phone","isFirst","css","DialogItem","name","MessageStyled","other","borderRadius","Message","message","SendMessageFormStyled","form","StyledButtonFlexEnd","StyledButton","FlexTextarea","Textarea","FormControl","reduxForm","onSubmitSuccess","formValues","dispatch","reset","onSubmit","handleSubmit","Field","placeholder","component","validate","isMessage","onKeyPress","e","key","shiftKey","preventDefault","target","value","values","type","DialogsWrapper","DialogsStyled","MessageWindowStyled","MessagesWrapper","Dialogs","dialogs","messages","addMessage","dialogElements","map","d","id","messageElements","m","messagesEnd","useRef","useEffect","current","scrollIntoView","behavior","ref","data","mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","to","React","connect","mapDispatchToProps","compose","dialogsPage"],"mappings":"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","file":"static/js/3.880fa3d1.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\n\r\nconst DialogItemStyled = styled.div`\r\n    display:flex;\r\n    background-color:${props => props.theme.colorPalettes.second.body};\r\n    transition: 0.3s;\r\n    padding:30px;\r\n    :hover{\r\n        transition: 0.7s;\r\n        filter:brightness(120%);\r\n    }\r\n    @media ${props => props.theme.media.phone}{\r\n        padding:2px;\r\n        flex-grow:1;\r\n        margin-bottom:5px;\r\n    } \r\n    \r\n    ${(props) => props.isFirst &&\r\n    css`\r\n        filter:brightness(90%);\r\n        :hover{\r\n            filter:brightness(90%);\r\n        }\r\n    `}\r\n`\r\n\r\n\r\nconst DialogItem = (props) => {\r\n    //fake code for selected dialog with Dmitry\r\n    let isFirst = false;\r\n    if (props.name === 'Dmitry') {\r\n        isFirst = true;\r\n    }\r\n\r\n    return (\r\n        <DialogItemStyled isFirst = {isFirst}>\r\n            {props.name}\r\n        </DialogItemStyled>\r\n    )\r\n}\r\n\r\nexport default DialogItem;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst MessageStyled = styled.div`\r\n    white-space: pre-wrap;\r\n    overflow-wrap: break-word;\r\n    border: 2px solid ${props => props.theme.colorPalettes.second.other};\r\n    border-radius: ${props => props.theme.borderRadius || \"0px\"};\r\n    margin: 7px 0px;\r\n    align-self:center;\r\n    width:90%;\r\n    padding:5px;\r\n    background-color:white;\r\n`\r\n\r\nconst Message = (props) => {\r\n    return (\r\n        <MessageStyled>\r\n            {props.message}\r\n        </MessageStyled>\r\n    )\r\n}\r\n\r\nexport default Message;","import React from \"react\";\r\nimport {Field, reduxForm, reset} from \"redux-form\";\r\nimport {FormControl} from \"../../common/FormsControls/FormsControls\";\r\nimport {isMessage} from \"../../../utils/validators/validators\";\r\nimport styled from \"styled-components\";\r\nimport {StyledButton} from \"../../styled/StyledButton\";\r\n\r\nconst SendMessageFormStyled = styled.form`\r\n    display:flex;\r\n    flex-direction:row;\r\n    justify-content:space-evenly;\r\n    margin:10px 0px;\r\n`\r\nconst StyledButtonFlexEnd = styled(StyledButton)`\r\n    align-self:center;\r\n    \r\n`\r\nconst FlexTextarea = styled.div`\r\n    flex: 0 0 80%;\r\n`\r\n\r\nconst Textarea = FormControl('textarea', '100%', false);\r\n\r\nconst DialogsForm = (props) => {\r\n    const addMessage = e => {\r\n        if (e.key === \"Enter\" && e.shiftKey === false) {\r\n            e.preventDefault();\r\n            if (e.target.value) {\r\n                props.handleSubmit(props.values);\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <SendMessageFormStyled onSubmit={props.handleSubmit}>\r\n            <FlexTextarea>\r\n                <Field placeholder={'Enter message'} name='message' component={Textarea}\r\n                       validate={[isMessage]} onKeyPress={addMessage}/>\r\n            </FlexTextarea>\r\n            <StyledButtonFlexEnd type=\"submit\" value=\"Send\"/>\r\n        </SendMessageFormStyled>\r\n    )\r\n}\r\n\r\n\r\nconst afterSubmit = (formValues, dispatch) => {\r\n    dispatch(reset(\"message\"));\r\n}\r\n\r\n\r\nexport default reduxForm({form: 'message', onSubmitSuccess: afterSubmit})(DialogsForm)\r\n","import styled from \"styled-components\";\r\n\r\nexport const DialogsWrapper = styled.div`\r\n    display: flex;\r\n    width:100%;\r\n    height:100%;\r\n    flex:1 0 100%;\r\n    justify-content: space-between;\r\n    @media ${props => props.theme.media.phone}{\r\n        flex-direction:column;\r\n    } \r\n`\r\n\r\nexport const DialogsStyled = styled.div`\r\n    display: flex;\r\n    flex-direction:column;\r\n    flex:0 0 30%;\r\n    @media ${props => props.theme.media.phone}{\r\n        flex:0 0 100%;\r\n        flex-direction:row;\r\n        flex-wrap:wrap;\r\n    } \r\n`\r\n\r\n\r\nexport const MessageWindowStyled = styled.div`\r\n    display: flex;\r\n    flex-direction:column;\r\n    flex:0 0 70%;\r\n    @media ${props => props.theme.media.phone}{\r\n        flex:1 0 100%;\r\n    } \r\n`\r\n\r\nexport const MessagesWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction:column;\r\n    flex-grow:1;\r\n    overflow-y:scroll;\r\n    height:100px;\r\n    \r\n    ::-webkit-scrollbar {\r\n        width: 10px;\r\n    }\r\n\r\n    ::-webkit-scrollbar-thumb {\r\n        background-color: ${props => props.theme.colorPalettes.second.other}; \r\n        border-radius: ${props => props.theme.borderRadius || \"0px\"};\r\n        width:5px;\r\n        height:5px;\r\n    }\r\n      \r\n`\r\n","import React, {useEffect, useRef} from \"react\";\r\nimport DialogItem from \"./DialogItem/DialogItem\";\r\nimport Message from \"./Message/Message\";\r\nimport DialogsForm from \"./DialogsForm/DialogsForm\";\r\nimport {DialogsStyled, DialogsWrapper, MessageWindowStyled, MessagesWrapper} from \"./DialogsStyled\";\r\n\r\nconst Dialogs = ({dialogs, messages, addMessage}) => {\r\n    let dialogElements = dialogs.map(d => <DialogItem key={d.id} id={d.id} name={d.name}/>);\r\n    let messageElements = messages.map(m => <Message key={m.id} id={m.id} message={m.message}/>);\r\n\r\n    let messagesEnd = useRef(null);\r\n\r\n    let onSubmit = (data) => {\r\n\r\n        addMessage(data.message);\r\n    }\r\n\r\n    useEffect(() => {\r\n        messagesEnd.current.scrollIntoView({behavior: \"auto\"});\r\n    }, [messages]);\r\n\r\n    return (\r\n        <DialogsWrapper>\r\n            <DialogsStyled>\r\n                {dialogElements}\r\n            </DialogsStyled>\r\n            <MessageWindowStyled>\r\n                <MessagesWrapper>\r\n                    {messageElements}\r\n                    <div ref={messagesEnd}/>\r\n                </MessagesWrapper>\r\n                <DialogsForm onSubmit={onSubmit} messages={messages}/>\r\n            </MessageWindowStyled>\r\n        </DialogsWrapper>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nconst withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component{\r\n        render() {\r\n            if (!this.props.isAuth) return (<Redirect to='/login'/>)\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n    return connect(mapStateToProps)(RedirectComponent);\r\n}\r\n\r\nexport default withAuthRedirect;","import {addMessage} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport withAuthRedirect from \"../../hoc/withAuthRedirect\";\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dialogs: state.dialogsPage.dialogs,\r\n        messages: state.dialogsPage.messages\r\n    }\r\n};\r\n\r\nlet mapDispatchToProps = {addMessage};\r\n\r\nexport default compose(\r\n    withAuthRedirect,\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n)(Dialogs)\r\n"],"sourceRoot":""}