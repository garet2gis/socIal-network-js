(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{127:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(37),o=t(3),i="ADD-MESSAGE",c={dialogs:[{id:1,name:"Dima"},{id:2,name:"Lolez"},{id:3,name:"Victor"},{id:4,name:"Precol"}],messages:[{id:1,message:"Hi!"},{id:2,message:"Who are you?"},{id:3,message:"You wanna go somewhere?"}]},a=function(e){return{type:i,newMessageBody:e}};n.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case i:return Object(o.a)(Object(o.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:5,message:n.newMessageBody}])});default:return e}}},139:function(e,n,t){e.exports={item:"Post_item__2WTmf"}},176:function(e,n,t){},177:function(e,n,t){},293:function(e,n,t){"use strict";t.r(n),t.d(n,"renderEntireTree",(function(){return Ht}));var r=t(0),o=t(7),i=t(1),c=t.n(i),a=function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,295)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),i(e),c(e)}))},s=t(66),u=t.n(s),l=t(31),d=t(32),f=t(34),p=t(33),b=t(16),h=t(6);function j(){var e=Object(o.a)(["\n    display: flex;\n    flex-direction: column;\n    font-size: 20px;\n    a{\n        text-decoration: none;\n        padding-top: 10px;\n        color:black;\n        &:hover{\n            color:",";\n        }\n    }\n    padding: 10px;\n    align-items:start;\n    \n"]);return j=function(){return e},e}function g(){var e=Object(o.a)(["\n    border-radius: ",";\n    position: relative;\n    width: 100%;\n    padding-right: 15px;\n    padding-left: 15px;\n    flex: 0 0 15%;\n    max-width: 20%;\n    background: ",";\n    @media ","{\n        flex: 0 0 100%;\n        max-width: 100%;\n    }\n"]);return g=function(){return e},e}var x=h.c.div(g(),(function(e){return e.theme.borderRadius||"0px"}),(function(e){return e.theme.colorPalettes.second.nav}),(function(e){return e.theme.media.phone})),O=h.c.nav(j(),(function(e){return e.theme.colorPalettes.second.header})),m=function(){return Object(r.jsx)(x,{children:Object(r.jsxs)(O,{children:[Object(r.jsx)(b.b,{to:"/profile",children:"Profile"}),Object(r.jsx)(b.b,{to:"/dialogs",children:"Messages"}),Object(r.jsx)(b.b,{to:"/news",children:"News"}),Object(r.jsx)(b.b,{to:"/music",children:"Music"}),Object(r.jsx)(b.b,{to:"/settings",children:"Settings"}),Object(r.jsx)(b.b,{to:"/users",children:"Users"})]})})},v=(t(176),function(){return Object(r.jsx)("div",{children:"News"})}),w=(t(177),function(){return Object(r.jsx)("div",{children:"Music"})}),y=function(){return Object(r.jsx)("div",{children:"Settings"})},P=t(13),k=t(3),S=t(14),C=t(10),E=t.n(C),U=t(15),_=t(37),I=t(135).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d62c4400-0e96-4d36-b89a-814554ffb0c8"}}),T={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return I.get("users?page=".concat(e,"&count=").concat(n)).then((function(e){return e.data}))},follow:function(e){return I.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return I.delete("follow/".concat(e)).then((function(e){return e.data}))}},A=function(e,n,t,r){return e.map((function(e){return e[t]===n?Object(k.a)(Object(k.a)({},e),r):e}))},F="FOLLOW",M="UNFOLLOW",z="SET_USERS",L="SET_CURRENT_PAGE",N="SET_TOTAL_USER_COUNT",R="TOGGLE_FETCHING",D="TOGGLE_FOLLOWING_PROGRESS",B={users:[],totalUsersCount:0,pageSize:100,currentPage:1,isFetching:!0,followingInProgress:[]},W=function(e){return{type:F,userId:e}},G=function(e){return{type:M,userId:e}},H=function(e){return{type:z,users:e}},J=function(e){return{type:L,currentPage:e}},V=function(e){return{type:N,totalUsersCount:e}},q=function(e){return{type:R,isFetching:e}},X=function(e,n){return{type:D,isFetching:e,userId:n}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F:return Object(k.a)(Object(k.a)({},e),{},{users:A(e.users,n.userId,"id",{followed:!0})});case M:return Object(k.a)(Object(k.a)({},e),{},{users:A(e.users,n.userId,"id",{followed:!1})});case z:return Object(k.a)(Object(k.a)({},e),{},{users:Object(_.a)(n.users)});case L:return Object(k.a)(Object(k.a)({},e),{},{currentPage:n.currentPage});case N:return Object(k.a)(Object(k.a)({},e),{},{totalUsersCount:n.totalUsersCount});case R:return Object(k.a)(Object(k.a)({},e),{},{isFetching:n.isFetching});case D:return Object(k.a)(Object(k.a)({},e),{},{followingInProgress:n.isFetching?[].concat(Object(_.a)(e.followingInProgress),[n.userId]):e.followingInProgress.filter((function(e){return e!==n.userId}))});default:return e}},K=t.p+"static/media/loader.fd8746b8.svg",Q=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:K,alt:"loader"})})},Z=t(92),$=t.n(Z),ee=t.p+"static/media/userAsset.9fd9547f.svg",ne=function(e){return Object(r.jsxs)("div",{className:$.a.user,children:[Object(r.jsx)("div",{children:Object(r.jsx)(b.b,{to:"/profile/".concat(e.user.id),children:Object(r.jsx)("img",{src:null===e.user.photos.small?ee:e.user.photos.small,className:$.a.avatar,alt:"user"})})}),Object(r.jsx)("div",{children:e.user.followed?Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(n){return n===e.user.id})),onClick:function(){e.unfollow(e.user.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(n){return n===e.user.id})),onClick:function(){e.follow(e.user.id)},children:"Follow"})}),Object(r.jsx)("div",{children:e.user.name}),Object(r.jsx)("div",{children:e.user.status})]})},te=t(57),re=t(93),oe=t.n(re),ie=t(136),ce=t.n(ie),ae=function(e){for(var n=e.totalItemsCount,t=e.pageSize,o=e.currentPage,c=e.onPageChanged,a=e.portionSize,s=Math.ceil(n/t),u=[],l=1;l<=s;l++)u.push(l);var d=Math.ceil(s/a),f=Object(i.useState)(1),p=Object(te.a)(f,2),b=p[0],h=p[1];Object(i.useEffect)((function(){var e=Math.ceil(o/a);h(e)}),[o,a]);var j=(b-1)*a+1,g=b*a;return Object(r.jsxs)("div",{children:[b>1&&Object(r.jsx)("button",{onClick:function(){return h((function(e){return--e}))},children:"Prev"}),u.filter((function(e){return e>=j&&e<=g})).map((function(e){return Object(r.jsx)("span",{className:ce()(o===e&&oe.a.selectedPage,oe.a.pageNumber),onClick:function(){c(e)},children:" ".concat(e," ")},e)})),b<d&&Object(r.jsx)("button",{onClick:function(){return h((function(e){return++e}))},children:"Next"})]})},se=function(e){var n=e.users.map((function(n){return Object(r.jsx)(ne,{user:n,follow:e.follow,unfollow:e.unfollow,followingInProgress:e.followingInProgress},n.id)}));return e.isFetching?Object(r.jsx)(Q,{}):Object(r.jsxs)("div",{children:[Object(r.jsx)(ae,{totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged,portionSize:20}),n]})},ue=t(9),le=t(137),de=Object(le.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),fe=function(e){return e.usersPage.pageSize},pe=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},he=function(e){return e.usersPage.isFetching},je=function(e){return e.usersPage.followingInProgress},ge=function(e){Object(f.a)(t,e);var n=Object(p.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).onPageChanged=function(n){var t=e.props;(0,t.requestUsers)(n,t.pageSize)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.requestUsers)(e.currentPage,e.pageSize)}},{key:"render",value:function(){return Object(r.jsx)(se,Object(k.a)({onPageChanged:this.onPageChanged},this.props))}}]),t}(c.a.Component),xe={follow:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(X(!0,e)),n.next=3,T.follow(e);case 3:0===n.sent.resultCode&&t(W(e)),t(X(!1,e));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},unfollow:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(X(!0,e)),n.next=3,T.unfollow(e);case 3:0===n.sent.resultCode&&t(G(e)),t(X(!1,e));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setUsers:H,setCurrentPage:J,setTotalUserCount:V,toggleFetching:q,requestUsers:function(e,n){return function(){var t=Object(U.a)(E.a.mark((function t(r){var o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(J(e)),r(q(!0)),t.next=4,T.getUsers(e,n);case 4:o=t.sent,r(q(!1)),r(H(o.items)),r(V(o.totalCount));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Oe=Object(ue.d)(Object(S.b)((function(e){return{users:de(e),pageSize:fe(e),totalUsersCount:pe(e),currentPage:be(e),isFetching:he(e),followingInProgress:je(e)}}),xe))(ge),me=t(54);function ve(){var e=Object(o.a)(["\n    min-height: 40px;\n"]);return ve=function(){return e},e}function we(){var e=Object(o.a)(["\n    min-height: 40px;\n    input{\n        font-size:14px;\n        height: 25px;\n        min-height: 25px;\n        background-color: #e4eff0;\n    }\n"]);return we=function(){return e},e}function ye(){var e=Object(o.a)(["\n    font-size: 14px;\n    min-height: 40px;\n    :hover span{\n        color:grey;\n        cursor: pointer;\n    }\n"]);return ye=function(){return e},e}var Pe=h.c.div(ye()),ke=Object(h.c)(me.a)(we()),Se=Object(h.c)(me.a)(ve()),Ce=function(e){var n=Object(i.useState)(!1),t=Object(te.a)(n,2),o=t[0],c=t[1],a=Object(i.useState)(e.status),s=Object(te.a)(a,2),u=s[0],l=s[1];Object(i.useEffect)((function(){l(e.status)}),[e.status]);return Object(r.jsxs)(Pe,{children:[!o&&Object(r.jsx)(Se,{onClick:function(){e.isOwner&&c(!0)},children:e.status||"----"}),o&&Object(r.jsx)(ke,{children:Object(r.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},onBlur:function(){c(!1),e.updateUserStatus(u)},autoFocus:!0,value:u})})]})},Ee=t(128),Ue=t(129),_e=t(40),Ie=t(42),Te=t.n(Ie);function Ae(){var e=Object(o.a)(["\n    font-weight: ",";\n"]);return Ae=function(){return e},e}function Fe(){var e=Object(o.a)(["\n    flex: 1 0 ",";\n    font-weight: ",";\n"]);return Fe=function(){return e},e}function Me(){var e=Object(o.a)(["\n    flex: 0 0 ",";\n    font-weight: ",";\n"]);return Me=function(){return e},e}function ze(){var e=Object(o.a)(["\n    display:flex;\n    margin:8px;\n    padding: ",";\n    justify-content: ",";\n"]);return ze=function(){return e},e}function Le(){var e=Object(o.a)(["\n    font-size: 22px;\n"]);return Le=function(){return e},e}function Ne(){var e=Object(o.a)(["\n    justify-content: space-around;\n    display: flex;\n    flex-wrap:wrap;\n    margin-top:10px;\n    \n"]);return Ne=function(){return e},e}function Re(){var e=Object(o.a)(["\n    flex: 0 0 ",";\n    display: ",";\n    @media ","{\n            flex: 0 0 100%;\n    }\n"]);return Re=function(){return e},e}function De(){var e=Object(o.a)(["\n    position: relative;\n    display: inline-block;\n    line-height: 0;\n    min-width: 200px;\n    margin-top:1vh;\n    border-radius: ",";\n    img{\n        border-radius: ",";\n        width: 100%;\n        max-width:300px;\n        background: white;\n    }\n    :hover ","{\n            transition: 0.3s;\n            opacity: 0.7;\n    }\n"]);return De=function(){return e},e}function Be(){var e=Object(o.a)(['\n    position: absolute;\n    bottom:5%;\n    left: 50%;\n    font-size: 100%;\n    padding: 4px;\n    width: 40%;\n    margin-left:-20%;\n    background-color: #555;\n    color: lightgrey;\n    display: block;\n    border: none;\n    cursor: pointer;\n    text-align: center;\n    opacity: 0;\n    transition: 0.3s;\n    line-height: 1;\n    border-radius: 5px;\n    input[type="file"] {\n        display: none;\n    }\n    :hover {\n        color: white;\n        transition: 0.2s;\n    }\n']);return Be=function(){return e},e}var We=h.c.label(Be()),Ge=h.c.div(De(),(function(e){return e.theme.borderRadius||"0px"}),(function(e){return e.theme.borderRadius||"0px"}),We),He=h.c.div(Re(),(function(e){return e.flexBasis||"100%"}),(function(e){return e.display||"block"}),(function(e){return e.theme.media.phone})),Je=h.c.div(Ne()),Ve=h.c.div(Le()),qe=h.c.div(ze(),(function(e){return e.padding||"0px"}),(function(e){return e.justifyContent||"flex-start"})),Xe=h.c.div(Me(),(function(e){return e.flexBasis||"40%"}),(function(e){return e.fontWeight||"bold"})),Ye=h.c.div(Fe(),(function(e){return e.flexBasis||"60%"}),(function(e){return e.fontWeight||"normal"})),Ke=h.c.div(Ae(),(function(e){return e.fontWeight||"bold"}));function Qe(){var e=Object(o.a)(["\n    min-width: 80px;\n    min-height: 40px;\n    background: #f3f0f1;\n    position: relative;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.1s ease-in-out;\n   \n    box-shadow: -6px -6px 10px rgba(255, 255, 255, 0.8),\n                 6px 6px 10px rgba(0, 0, 0, 0.2);\n               \n    &:hover {\n        opacity: 0.7;\n        box-shadow: -6px -6px 10px rgba(255, 255, 255, 0.8),\n          6px 6px 10px rgba(0, 0, 0, 0.2);\n          \n    }\n   \n    &:active {\n        opacity: 1;\n        box-shadow: inset -4px -4px 8px rgba(255, 255, 255, 0.5),\n          inset 8px 8px 16px rgba(0, 0, 0, 0.1);\n        color: #79e3b6;\n        outline: 0;\n    }\n    &:focus {\n        box-shadow: inset -4px -4px 8px rgba(255, 255, 255, 0.5),\n          inset 8px 8px 16px rgba(0, 0, 0, 0.1);\n        outline: 0;\n    }\n"]);return Qe=function(){return e},e}function Ze(){var e=Object(o.a)(["\n    min-width:60px;\n    min-height:30px;\n    font-size: 15px;\n    display:inline-block;\n    padding:0.2em 1.45em;\n    margin:0.1em;\n    border:0.15em solid ",";\n    color:white;\n    background-color:",';\n    text-align:center;\n    cursor:pointer;\n    font-weight:500;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue";\n    &:hover {\n        border-color:#4c8da1;\n        background-color:#3b7b8f;\n    }\n    &:active {\n        background-color:#51737d;\n        outline: 0;\n    }\n    &:focus {\n    background-color:#51737d;\n        outline: 0;\n    }\n    @media all and (max-width:30em){\n        display:block;\n        margin:0.2em auto;\n    }\n    border-radius: ',";\n    @media ","{\n            margin:0px;\n    }\n"]);return Ze=function(){return e},e}var $e=h.c.input(Ze(),(function(e){return e.theme.colorPalettes.second.other}),(function(e){return e.theme.colorPalettes.second.other}),(function(e){return e.theme.borderRadius||"0px"}),(function(e){return e.theme.media.phone}));h.c.input(Qe());function en(){var e=Object(o.a)(["\n  margin:auto;\n  width:50%;\n  background-color:",";\n  border-radius:",";\n  @media ","{\n    flex:1 0 100%;\n    width: 100%;\n  }\n"]);return en=function(){return e},e}function nn(){var e=Object(o.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    padding: 1rem;\n    overflow-y: auto;\n    background-color: rgba(0, 0, 0, 0.7);\n"]);return nn=function(){return e},e}var tn=Object(_e.a)("input","100%"),rn=Object(_e.a)("textarea","100%"),on=h.c.div(nn()),cn=h.c.form(en(),(function(e){return e.theme.colorPalettes.second.body}),(function(e){return e.theme.borderRadius||"0px"}),(function(e){return e.theme.media.phone})),an=function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return Object(r.jsxs)(qe,{children:[Object(r.jsx)(Xe,{flexBasis:"30%",children:e}),Object(r.jsx)(Ye,{flexBasis:"70%",children:Object(r.jsx)(Ee.a,{placeholder:o,name:n,component:t,validate:i,type:c})})]})},sn=Object(Ue.a)({form:"profileEditForm"})((function(e){var n=e.profile,t=e.handleSubmit,o=e.error,i=e.cancelSubmit;return Object(r.jsx)(on,{children:Object(r.jsxs)(cn,{onSubmit:t,children:[o&&Object(r.jsx)("div",{className:Te.a.formSummaryError,children:o}),an("Full name: ","fullName",tn,"full name"),Object(r.jsx)("hr",{}),an("About me: ","aboutMe",rn,"about me"),an("Looking for a job: ","lookingForAJob","input",null,[],"checkbox"),an("Work preferences: ","lookingForAJobDescription",rn,"work preferences"),Object(r.jsx)("hr",{}),Object(r.jsxs)(Ke,{children:["Contacts: ",Object.keys(n.contacts).map((function(e){return Object(r.jsxs)(qe,{children:[Object(r.jsxs)(Xe,{flexBasis:"30%",children:[e,":"]}),Object(r.jsx)(Ye,{flexBasis:"70%",children:Object(r.jsx)(Ee.a,{placeholder:e,name:"contacts.".concat(e),component:tn,validate:[]})})]},e)}))]}),Object(r.jsxs)(qe,{justifyContent:"space-evenly",children:[Object(r.jsx)($e,{type:"submit",value:"Save"}),Object(r.jsx)($e,{type:"button",onClick:i,value:"Cancel"})]})]})})}));function un(){var e=Object(o.a)(["\n    border: 2px solid ",";\n    border-radius: ",";\n    padding: 1vh;\n"]);return un=function(){return e},e}var ln=h.c.div(un(),(function(e){return e.theme.colorPalettes.second.other||"black"}),(function(e){return e.theme.borderRadius||"0px"})),dn=function(e,n){return Object(r.jsxs)(qe,{children:[Object(r.jsx)(Xe,{children:e}),Object(r.jsx)(Ye,{children:n})]})},fn=function(e){var n=e.contactType,t=e.contactInfo;return Object(r.jsx)(r.Fragment,{children:t&&dn("".concat(n,": "),t)})},pn=function(e){var n=e.profile,t=e.setEditMode,o=e.isOwner;return Object(r.jsxs)(ln,{children:[dn("About me: ",n.aboutMe),dn("Looking for a job: ",n.lookingForAJob?"yes":"no"),n.lookingForAJob&&dn("Work preferences: ",n.lookingForAJobDescription),Object.keys(n.contacts).filter((function(e){return Boolean(n.contacts[e])})).length>0&&Object(r.jsxs)(Ke,{children:[Object(r.jsx)("hr",{}),"Contacts: ",Object.keys(n.contacts).map((function(e){return Object(r.jsx)(fn,{contactType:e,contactInfo:n.contacts[e]},e)}))]}),Object(r.jsx)(qe,{padding:"5px",justifyContent:"flex-end",children:o&&Object(r.jsx)($e,{type:"button",onClick:t,value:"Edit"})})]})},bn=function(e){var n=e.profile,t=e.savePhoto,o=e.isOwner,c=e.status,a=e.updateUserStatus,s=e.editMode,u=e.setEditMode,l=e.disableEditMode,d=e.saveProfile;if(Object(i.useEffect)((function(){return function(){l()}}),[l]),!n)return Object(r.jsx)(Q,{});return Object(r.jsxs)(Je,{children:[Object(r.jsx)(He,{flexBasis:"40%",children:Object(r.jsxs)(Ge,{children:[Object(r.jsx)("img",{src:n.photos.large?n.photos.large:ee,alt:"avatar"}),o&&Object(r.jsxs)(We,{children:[Object(r.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&t(e.target.files[0])}}),"Change photo"]})]})}),Object(r.jsxs)(He,{flexBasis:"50%",children:[Object(r.jsx)(Ve,{children:n.fullName}),Object(r.jsx)(Ce,{status:c,updateUserStatus:a,isOwner:o}),Object(r.jsx)(pn,{profile:n,setEditMode:u,isOwner:o}),s&&Object(r.jsx)(sn,{initialValues:n,onSubmit:function(e){d(e)},profile:n,isOwner:o,cancelSubmit:l})]})]})},hn=t(68),jn={getProfile:function(e){return I.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return I.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return I.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var n=new FormData;return n.append("image",e),I.put("profile/photo",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfile:function(e){return I.put("profile",e).then((function(e){return e.data}))}},gn=t(30),xn="ADD-POST",On="SET_USER_PROFILE",mn="SET_STATUS",vn="DELETE_POST",wn="SAVE_PHOTO_SUCCESS",yn="SET_EDIT_MODE",Pn="DISABLE_EDIT_MODE",kn="SAVE_PROFILE_SUCCESS",Sn={posts:[{id:1,message:"hey, nibba",likesCount:228},{id:2,message:"get the fuck out",likesCount:9},{id:3,message:"It is my first post",likesCount:3}],profile:null,status:"default status",editMode:!1},Cn=function(e){return{type:kn,profile:e}},En=function(e){return{type:mn,status:e}},Un=function(e){return{type:wn,photos:e}},_n=function(){return{type:Pn}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case xn:return Object(k.a)(Object(k.a)({},e),{},{posts:[].concat(Object(_.a)(e.posts),[{id:5,message:n.newPostText,likesCount:0}])});case vn:return Object(k.a)(Object(k.a)({},e),{},{posts:Object(_.a)(e.posts.filter((function(e){return e.id!==n.postId})))});case On:return Object(k.a)(Object(k.a)({},e),{},{profile:n.profile});case mn:return Object(k.a)(Object(k.a)({},e),{},{status:n.status});case wn:return Object(k.a)(Object(k.a)({},e),{},{profile:Object(k.a)(Object(k.a)({},e.profile),{},{photos:n.photos})});case yn:return Object(k.a)(Object(k.a)({},e),{},{editMode:!0});case Pn:return Object(k.a)(Object(k.a)({},e),{},{editMode:!1});case kn:return Object(k.a)(Object(k.a)({},e),{},{profile:n.profile});default:return e}},Tn=t(139),An=t.n(Tn),Fn=function(e){return Object(r.jsxs)("div",{className:An.a.item,children:[Object(r.jsx)("img",{src:"https://w7.pngwing.com/pngs/642/857/png-transparent-internet-meme-redemption-white-sticker-meme.png"}),e.message,Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["like ",e.likeCount]})})]})},Mn=t(36),zn=Object(Mn.a)(10),Ln=Object(_e.a)("textarea"),Nn=function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(Ee.a,{placeholder:"Enter post",name:"newPostText",component:Ln,validate:[Mn.b,zn]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Add post"})})]})};Nn=Object(Ue.a)({form:"AddNewPostForm"})(Nn);var Rn=function(e){var n=e.posts.map((function(e){return Object(r.jsx)(Fn,{message:e.message,likeCount:e.likesCount},e.id)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"My posts"}),Object(r.jsx)(Nn,{onSubmit:function(n){e.addPost(n.newPostText)}}),Object(r.jsx)("div",{children:n})]})},Dn=Object(S.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:function(e){return{type:xn,newPostText:e}}})(Rn),Bn=c.a.memo((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(bn,Object(k.a)({},e)),Object(r.jsx)(Dn,{})]})})),Wn=function(e){Object(f.a)(t,e);var n=Object(p.a)(t);function t(){return Object(l.a)(this,t),n.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props,n=e.match,t=e.authorizedUserId,r=e.history,o=e.getProfile,i=e.setUserStatus,c=n.params.userId;c||(c=t)||r.push("/login"),c&&(o(c),i(c))}},{key:"render",value:function(){return Object(r.jsx)(Bn,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,editMode:this.props.editMode,setEditMode:this.props.setEditMode,disableEditMode:this.props.disableEditMode})}}]),t}(c.a.Component),Gn=Object(ue.d)(Object(S.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.id,editMode:e.profilePage.editMode}}),{getProfile:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jn.getProfile(e);case 2:r=n.sent,t({type:On,profile:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setUserStatus:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jn.getStatus(e);case 2:r=n.sent,t(En(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,jn.updateStatus(e);case 3:0===n.sent.resultCode&&t(En(e)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert("Error with status");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},savePhoto:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jn.savePhoto(e);case 2:0===(r=n.sent).resultCode&&t(Un(r.data.photos));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},disableEditMode:_n,setEditMode:function(){return{type:yn}},saveProfile:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){var r,o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jn.saveProfile(e);case 2:0===(r=n.sent).resultCode?(t(Cn(e)),t(_n())):(o=r.messages[0].slice(r.messages[0].indexOf(">")+1,r.messages[0].indexOf(")")).toLocaleLowerCase(),t(Object(gn.a)("profileEditForm",{contacts:Object(hn.a)({},o,r.messages[0])})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),P.g)(Wn);function Hn(){var e=Object(o.a)(["\n    width: ",";\n    background-color: black;\n    border-radius:35%;\n    margin-left:5px;\n    img{\n        display: block;\n        width: 100%;\n        height: 100%;\n    }\n"]);return Hn=function(){return e},e}function Jn(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: "," 0;\n"]);return Jn=function(){return e},e}var Vn=h.c.header(Jn(),(function(e){return e.paddingTopBottom||"5px"})),qn=h.c.div(Hn(),(function(e){return e.width||"20px"})),Xn=t.p+"static/media/logo.6ce24c58.svg";function Yn(){var e=Object(o.a)(["\nmargin-right: 40px;\ncolor: ",";\n\n"]);return Yn=function(){return e},e}function Kn(){var e=Object(o.a)(["\n    text-decoration: none;\n    border-radius: ",";\n    min-width:60px;\n    min-height:30px;\n    font-size: 15px;\n    display:inline-block;\n    padding:0.2em 1.45em;\n    margin:0.1em;\n    border:0.15em solid ",";\n    color:white;\n    background-color:",';\n    text-align:center;\n    cursor:pointer;\n    font-weight:500;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue";\n    &:hover {\n        border-color:#4c8da1;\n        background-color:#3b7b8f;\n    }\n    &:active {\n        background-color:#51737d;\n        outline: 0;\n    }\n    &:focus {\n    background-color:#51737d;\n        outline: 0;\n    }\n    @media all and (max-width:30em){\n        display:block;\n        margin:0.2em auto;\n    }\n']);return Kn=function(){return e},e}var Qn=Object(h.c)(b.b)(Kn(),(function(e){return e.theme.borderRadius||"0px"}),(function(e){return e.theme.colorPalettes.second.other}),(function(e){return e.theme.colorPalettes.second.other})),Zn=h.c.span(Yn(),(function(e){return e.theme.colorPalettes.second.body})),$n=function(e){var n=e.isAuth,t=e.logout,o=e.login;return Object(r.jsxs)(Vn,{paddingTopBottom:"10px",children:[Object(r.jsx)(qn,{width:"50px",children:Object(r.jsx)("img",{src:Xn,alt:"logo"})}),Object(r.jsxs)("div",{children:[n&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(Zn,{children:["login: ",o]}),Object(r.jsx)($e,{type:"button",value:"Logout",onClick:t})]}),!n&&Object(r.jsx)(Qn,{to:"/login",children:"Login"})]})]})},et={authMe:function(){return I.get("auth/me").then((function(e){return e.data}))},login:function(e){return I.post("auth/login",e).then((function(e){return e.data}))},logout:function(){return I.delete("auth/login").then((function(e){return e.data}))}},nt={getCaptchaUrl:function(){return I.get("security/get-captcha-url").then((function(e){return e.data}))}},tt="SET_USER_AUTH_DATA",rt="SET_CAPTCHA_URL_SUCCESS",ot="DELETE_USER_AUTH_DATA",it={id:null,login:null,email:null,isAuth:!1,captchaUrl:null},ct=function(e){return{type:tt,data:e}},at=function(e){return{type:rt,data:e}},st=function(){return function(){var e=Object(U.a)(E.a.mark((function e(n){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.authMe();case 2:0===(t=e.sent).resultCode&&n(ct(t.data));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},ut=function(){return function(){var e=Object(U.a)(E.a.mark((function e(n){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.getCaptchaUrl();case 2:t=e.sent,n(at(t.url));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case tt:return Object(k.a)(Object(k.a)(Object(k.a)({},e),n.data),{},{isAuth:!0});case rt:return Object(k.a)(Object(k.a)({},e),{},{captchaUrl:n.data});case ot:return Object(k.a)(Object(k.a)({},e),{},{id:null,login:null,email:null,isAuth:!1});default:return e}},dt=function(e){Object(f.a)(t,e);var n=Object(p.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).logoutRedirect=Object(U.a)(E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.logout();case 2:e.props.history.push("/login");case 3:case"end":return n.stop()}}),n)}))),e}return Object(d.a)(t,[{key:"render",value:function(){return Object(r.jsx)($n,{isAuth:this.props.isAuth,login:this.props.login,logout:this.logoutRedirect})}}]),t}(c.a.Component),ft=Object(ue.d)(Object(S.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(){var e=Object(U.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.logout();case 2:0===e.sent.resultCode&&n({type:ot});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}),P.g)(dt),pt=Object(_e.a)("input"),bt=Object(Mn.a)(20),ht=Object(Ue.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(Ee.a,{placeholder:"Email",name:"email",component:pt,validate:[Mn.b,bt]})}),Object(r.jsx)("div",{children:Object(r.jsx)(Ee.a,{placeholder:"Password",name:"password",component:pt,type:"password",validate:[Mn.b,bt]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(Ee.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me"]}),e.captchaUrl&&Object(r.jsx)("img",{src:e.captchaUrl,alt:"captcha"}),e.captchaUrl&&Object(r.jsx)("div",{children:Object(r.jsx)(Ee.a,{placeholder:"Captcha",name:"captcha",component:pt,validate:[Mn.b]})}),e.error&&Object(r.jsx)("div",{className:Te.a.formSummaryError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})),jt=Object(S.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e){return function(){var n=Object(U.a)(E.a.mark((function n(t){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,et.login(e);case 2:0===(r=n.sent).resultCode?t(st()):(10===r.resultCode&&t(ut()),t(Object(gn.a)("login",{_error:r.messages.length>0?r.messages[0]:"Some error"})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){if(e.isAuth)return Object(r.jsx)(P.a,{to:"/profile"});return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(ht,{onSubmit:function(n){e.login(n)},captchaUrl:e.captchaUrl})]})})),gt="INITIALIZING_SUCCESS",xt={isInitialized:!1},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case gt:return Object(k.a)(Object(k.a)({},e),{},{isInitialized:!0});default:return e}},mt=t(127),vt=t(130),wt=t(140),yt=Object(ue.c)({profilePage:In,dialogsPage:mt.b,usersPage:Y,auth:lt,form:vt.a,app:Ot}),Pt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,kt=Object(ue.e)(yt,Pt(Object(ue.a)(wt.a))),St=kt;window.__store__=kt;var Ct=function(e){return function(n){return Object(r.jsx)(c.a.Suspense,{fallback:Object(r.jsx)(Q,{}),children:Object(r.jsx)(e,Object(k.a)({},n))})}};function Et(){var e=Object(o.a)(["\n    height: 15vh;\n    text-align: center; \n"]);return Et=function(){return e},e}var Ut=h.c.footer(Et()),_t=function(){return Object(r.jsx)(Ut,{children:Object(r.jsx)("h2",{children:"Footer"})})};function It(){var e=Object(o.a)(["\n    position: relative;\n    width: 100%;\n    padding-right: 15px;\n    padding-left: 15px;\n    flex: 0 0 80%;\n    max-width: 80%;\n    background: ",";\n    @media ","{\n        flex: 1 0 100%;\n        max-width: 100%;\n    }\n    border-radius: ",";\n"]);return It=function(){return e},e}function Tt(){var e=Object(o.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n    margin-right: -15px;\n    margin-left: -15px;\n    flex-grow: 1; \n    @media ","{\n        flex-direction: column;\n    }\n"]);return Tt=function(){return e},e}function At(){var e=Object(o.a)(["\n    display: flex;\n    flex-direction: column;\n    width:100%;\n    max-width:1200px;\n    padding-right: 15px;\n    padding-left: 15px;\n    margin-left:auto;\n    margin-right:auto;\n    background-color: ",";\n    min-height: 100vh;\n"]);return At=function(){return e},e}var Ft=h.c.div(At(),(function(e){return e.theme.colorPalettes.second.header})),Mt=h.c.div(Tt(),(function(e){return e.theme.media.phone})),zt=h.c.div(It(),(function(e){return e.theme.colorPalettes.second.body}),(function(e){return e.theme.media.phone}),(function(e){return e.theme.borderRadius||"0px"})),Lt=c.a.lazy((function(){return t.e(3).then(t.bind(null,296))})),Nt=function(e){Object(f.a)(t,e);var n=Object(p.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).catchAllUnhandledErrors=function(e,n){alert(e.message)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.initialize(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.isInitialized?Object(r.jsxs)(Ft,{children:[Object(r.jsx)(ft,{}),Object(r.jsxs)(Mt,{children:[Object(r.jsx)(m,{}),Object(r.jsx)(zt,{children:Object(r.jsxs)(P.d,{children:[Object(r.jsx)(P.b,{path:"/dialogs",render:Ct(Lt)}),Object(r.jsx)(P.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(Gn,{})}}),Object(r.jsx)(P.b,{path:"/news",render:function(){return Object(r.jsx)(v,{})}}),Object(r.jsx)(P.b,{path:"/music",render:function(){return Object(r.jsx)(w,{})}}),Object(r.jsx)(P.b,{path:"/settings",render:function(){return Object(r.jsx)(y,{})}}),Object(r.jsx)(P.b,{path:"/users",render:function(){return Object(r.jsx)(Oe,{})}}),Object(r.jsx)(P.b,{path:"/login",render:function(){return Object(r.jsx)(jt,{})}}),Object(r.jsx)(P.a,{exact:!0,from:"/",to:"/profile"}),Object(r.jsx)(P.b,{path:"*",render:function(){return Object(r.jsx)("div",{children:"404 NOT FOUND"})}})]})})]}),Object(r.jsx)(_t,{})]}):Object(r.jsx)(Q,{})}}]),t}(c.a.Component),Rt=Object(ue.d)(Object(S.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initialize:function(){return function(e){var n=e(st());Promise.all([n]).then((function(){e({type:gt})}))}}}))(Nt),Dt=function(){return Object(r.jsx)(b.a,{children:Object(r.jsx)(S.a,{store:St,children:Object(r.jsx)(Rt,{})})})};function Bt(){var e=Object(o.a)(["\n        *,\n        *::before,\n        *::after {\n            box-sizing: border-box;\n        }\n        html {\n            font-family: sans-serif;\n            line-height: 1.15;\n            -webkit-text-size-adjust: 100%;\n            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n        }\n        body {\n            margin: 0;\n            font-family: 'Segoe UI','Roboto',sans-serif;\n            font-size: 1rem;\n            font-weight: 400;\n            line-height: 1.5;\n            color: #212529;\n            text-align: left;\n            background-color: #fff;\n        }\n\n"]);return Bt=function(){return e},e}var Wt=Object(h.b)(Bt()),Gt={colorPalettes:{second:{body:"#ced7d8",header:"#f47a60",nav:"#7fe7dc",other:"#316879"},first:{body:"#e0cdbe",other:"#a9c0a6",nav:"#edca82",header:"#097770"}},media:{phone:"(max-width: 660px)",tablet:"(max-width: 900px) and (min-width:660px)"},borderRadius:"5px"},Ht=function(){u.a.render(Object(r.jsxs)(h.a,{theme:Gt,children:[Object(r.jsx)(Wt,{}),Object(r.jsx)(Dt,{})]}),document.getElementById("root"))};Ht(),St.subscribe(Ht),a()},36:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return o}));var r=function(e){if(!e)return"Field is required"},o=function(e){return function(n){if(!(n.length<=e))return"Max length is ".concat(e)}}},40:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),o=t(3),i=t(141),c=(t(1),t(42)),a=t.n(c),s=t(54),u=function(e,n){return function(t){var c=t.input,u=t.meta,l=Object(i.a)(t,["input","meta"]),d=u.touched&&u.error;return Object(r.jsxs)("div",{className:a.a.formControl+" "+(d?a.a.error:""),children:[Object(r.jsx)(s.a,{width:n,children:Object(r.jsx)(e,Object(o.a)(Object(o.a)({},c),l))}),d&&Object(r.jsxs)("span",{children:[" ",u.error," "]})]})}}},42:function(e,n,t){e.exports={formControl:"FormsControls_formControl__2YQaU",error:"FormsControls_error__3g4FW",formSummaryError:"FormsControls_formSummaryError__PAkJW"}},54:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(7);function o(){var e=Object(r.a)(["\n  input, textarea{\n    font-size: 16px;\n    font-family: inherit;\n    padding: 0.25em 0.5em;\n    background-color: #fff;\n    border: 2px solid #8b8a8b;\n    border-radius: 4px;\n    transition: 180ms box-shadow ease-in-out;\n    width:",";\n    &:focus{\n        border-color: ",";\n        box-shadow: 0 0 0 3px\n            hsla(194, 42%, 13%, 0.2);\n        outline: 3px solid transparent;\n    }\n  }\n  input{\n        line-height: 1;\n        height: 2.25rem;\n  }\n  textarea{\n        resize: none;\n  }\n"]);return o=function(){return e},e}var i=t(6).c.div(o(),(function(e){return e.width||"100%"}),(function(e){return e.theme.colorPalettes.second.other}))},92:function(e,n,t){e.exports={avatar:"User_avatar__2LoF5",user:"User_user__1f7S8"}},93:function(e,n,t){e.exports={pageNumber:"Pagination_pageNumber__3nXTM",selectedPage:"Pagination_selectedPage__38Dd4"}}},[[293,1,2]]]);
//# sourceMappingURL=main.127310fc.chunk.js.map