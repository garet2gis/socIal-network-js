(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(37),c=n(3),i="ADD-MESSAGE",o={dialogs:[{id:1,name:"Dima"},{id:2,name:"Lolez"},{id:3,name:"Victor"},{id:4,name:"Precol"}],messages:[{id:1,message:"Hi!"},{id:2,message:"Who are you?"},{id:3,message:"You wanna go somewhere?"}]},a=function(e){return{type:i,newMessageBody:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(c.a)(Object(c.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:5,message:t.newMessageBody}])});default:return e}}},138:function(e,t,n){e.exports={item:"Post_item__2WTmf"}},175:function(e,t,n){},176:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t),n.d(t,"renderEntireTree",(function(){return On}));var r=n(0),c=n(12),i=n(1),o=n.n(i),a=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,294)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),i(e),o(e)}))},s=n(65),u=n.n(s),l=n(31),d=n(32),f=n(34),j=n(33),b=n(16),p=n(11);function h(){var e=Object(c.a)(["\n    display: flex;\n    flex-direction: column;\n    a{\n        color: white;\n        text-decoration: none;\n        &:hover{\n            color: darkred;\n        }\n    }\n    padding: 10px;\n"]);return h=function(){return e},e}function O(){var e=Object(c.a)(["\n    position: relative;\n    width: 100%;\n    padding-right: 15px;\n    padding-left: 15px;\n    flex: 0 0 20%;\n    max-width: 20%;\n    background: pink;\n    @media ","{\n        flex: 0 0 100%;\n        max-width: 100%;\n    }\n"]);return O=function(){return e},e}var g=p.c.div(O(),(function(e){return e.theme.media.phone})),x=p.c.nav(h()),m=function(){return Object(r.jsx)(g,{children:Object(r.jsxs)(x,{children:[Object(r.jsx)(b.b,{to:"/profile",children:"Profile"}),Object(r.jsx)(b.b,{to:"/dialogs",children:"Messages"}),Object(r.jsx)(b.b,{to:"/news",children:"News"}),Object(r.jsx)(b.b,{to:"/music",children:"Music"}),Object(r.jsx)(b.b,{to:"/settings",children:"Settings"}),Object(r.jsx)(b.b,{to:"/users",children:"Users"})]})})},v=(n(175),function(){return Object(r.jsx)("div",{children:"News"})}),w=(n(176),function(){return Object(r.jsx)("div",{children:"Music"})}),y=function(){return Object(r.jsx)("div",{children:"Settings"})},S=n(13),P=n(3),C=n(14),E=n(10),k=n.n(E),U=n(17),_=n(37),I=n(134).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"7e127611-be10-4a25-97f0-44bab15fc4c4"}}),T={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return I.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return I.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return I.delete("follow/".concat(e)).then((function(e){return e.data}))}},A=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(P.a)(Object(P.a)({},e),r):e}))},M="FOLLOW",F="UNFOLLOW",L="SET_USERS",N="SET_CURRENT_PAGE",z="SET_TOTAL_USER_COUNT",D="TOGGLE_FETCHING",R="TOGGLE_FOLLOWING_PROGRESS",G={users:[],totalUsersCount:0,pageSize:100,currentPage:1,isFetching:!0,followingInProgress:[]},W=function(e){return{type:M,userId:e}},B=function(e){return{type:F,userId:e}},J=function(e){return{type:L,users:e}},H=function(e){return{type:N,currentPage:e}},V=function(e){return{type:z,totalUsersCount:e}},q=function(e){return{type:D,isFetching:e}},X=function(e,t){return{type:R,isFetching:e,userId:t}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(P.a)(Object(P.a)({},e),{},{users:A(e.users,t.userId,"id",{followed:!0})});case F:return Object(P.a)(Object(P.a)({},e),{},{users:A(e.users,t.userId,"id",{followed:!1})});case L:return Object(P.a)(Object(P.a)({},e),{},{users:Object(_.a)(t.users)});case N:return Object(P.a)(Object(P.a)({},e),{},{currentPage:t.currentPage});case z:return Object(P.a)(Object(P.a)({},e),{},{totalUsersCount:t.totalUsersCount});case D:return Object(P.a)(Object(P.a)({},e),{},{isFetching:t.isFetching});case R:return Object(P.a)(Object(P.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(_.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},K=n.p+"static/media/loader.fd8746b8.svg",Q=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:K,alt:"loader"})})},Z=n(91),$=n.n(Z),ee=n.p+"static/media/userAsset.73a0bc1f.png",te=function(e){return Object(r.jsxs)("div",{className:$.a.user,children:[Object(r.jsx)("div",{children:Object(r.jsx)(b.b,{to:"/profile/".concat(e.user.id),children:Object(r.jsx)("img",{src:null===e.user.photos.small?ee:e.user.photos.small,className:$.a.avatar,alt:"user"})})}),Object(r.jsx)("div",{children:e.user.followed?Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.unfollow(e.user.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.follow(e.user.id)},children:"Follow"})}),Object(r.jsx)("div",{children:e.user.name}),Object(r.jsx)("div",{children:e.user.status})]})},ne=n(56),re=n(92),ce=n.n(re),ie=n(135),oe=n.n(ie),ae=function(e){for(var t=e.totalItemsCount,n=e.pageSize,c=e.currentPage,o=e.onPageChanged,a=e.portionSize,s=Math.ceil(t/n),u=[],l=1;l<=s;l++)u.push(l);var d=Math.ceil(s/a),f=Object(i.useState)(1),j=Object(ne.a)(f,2),b=j[0],p=j[1];Object(i.useEffect)((function(){var e=Math.ceil(c/a);p(e)}),[c,a]);var h=(b-1)*a+1,O=b*a;return Object(r.jsxs)("div",{children:[b>1&&Object(r.jsx)("button",{onClick:function(){return p((function(e){return--e}))},children:"Prev"}),u.filter((function(e){return e>=h&&e<=O})).map((function(e){return Object(r.jsx)("span",{className:oe()(c===e&&ce.a.selectedPage,ce.a.pageNumber),onClick:function(){o(e)},children:" ".concat(e," ")},e)})),b<d&&Object(r.jsx)("button",{onClick:function(){return p((function(e){return++e}))},children:"Next"})]})},se=function(e){var t=e.users.map((function(t){return Object(r.jsx)(te,{user:t,follow:e.follow,unfollow:e.unfollow,followingInProgress:e.followingInProgress},t.id)}));return e.isFetching?Object(r.jsx)(Q,{}):Object(r.jsxs)("div",{children:[Object(r.jsx)(ae,{totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged,portionSize:20}),t]})},ue=n(8),le=n(136),de=Object(le.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),fe=function(e){return e.usersPage.pageSize},je=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},pe=function(e){return e.usersPage.isFetching},he=function(e){return e.usersPage.followingInProgress},Oe=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onPageChanged=function(t){var n=e.props;(0,n.requestUsers)(t,n.pageSize)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.requestUsers)(e.currentPage,e.pageSize)}},{key:"render",value:function(){return Object(r.jsx)(se,Object(P.a)({onPageChanged:this.onPageChanged},this.props))}}]),n}(o.a.Component),ge={follow:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(X(!0,e)),t.next=3,T.follow(e);case 3:0===t.sent.resultCode&&n(W(e)),n(X(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(X(!0,e)),t.next=3,T.unfollow(e);case 3:0===t.sent.resultCode&&n(B(e)),n(X(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUsers:J,setCurrentPage:H,setTotalUserCount:V,toggleFetching:q,requestUsers:function(e,t){return function(){var n=Object(U.a)(k.a.mark((function n(r){var c;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(H(e)),r(q(!0)),n.next=4,T.getUsers(e,t);case 4:c=n.sent,r(q(!1)),r(J(c.items)),r(V(c.totalCount));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},xe=Object(ue.d)(Object(C.b)((function(e){return{users:de(e),pageSize:fe(e),totalUsersCount:je(e),currentPage:be(e),isFetching:pe(e),followingInProgress:he(e)}}),ge))(Oe);function me(){var e=Object(c.a)(["\n    font-size: 14px;\n    min-height: 30px;\n    \n    :hover span{\n        color:grey;\n        cursor: pointer;\n    }\n    \n"]);return me=function(){return e},e}var ve=p.c.div(me()),we=function(e){var t=Object(i.useState)(!1),n=Object(ne.a)(t,2),c=n[0],o=n[1],a=Object(i.useState)(e.status),s=Object(ne.a)(a,2),u=s[0],l=s[1];Object(i.useEffect)((function(){l(e.status)}),[e.status]);return Object(r.jsxs)(ve,{children:[!c&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:function(){e.isOwner&&o(!0)},children:e.status||"----"})}),c&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},onBlur:function(){o(!1),e.updateUserStatus(u)},autoFocus:!0,value:u})})]})},ye=n(127),Se=n(128),Pe=n(40),Ce=n(42),Ee=n.n(Ce),ke=Object(Pe.a)("input"),Ue=Object(Pe.a)("textarea"),_e=Object(Se.a)({form:"profileEditForm"})((function(e){var t=e.profile,n=e.isOwner,c=e.handleSubmit,i=e.error,o=e.cancelSubmit;return Object(r.jsxs)("form",{onSubmit:c,children:[n&&Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Save"})}),Object(r.jsx)("button",{type:"button",onClick:o,children:"Cancel"}),i&&Object(r.jsx)("div",{className:Ee.a.formSummaryError,children:i}),Object(r.jsxs)("div",{children:["Full name:",Object(r.jsx)(ye.a,{placeholder:"full name",name:"fullName",component:ke,validate:[]})]}),Object(r.jsxs)("div",{children:["About me:",Object(r.jsx)(ye.a,{placeholder:"about me",name:"aboutMe",component:Ue,validate:[]})]}),Object(r.jsxs)("div",{children:["Looking for a job:",Object(r.jsx)(ye.a,{name:"lookingForAJob",component:"input",validate:[],type:"checkbox"})]}),Object(r.jsxs)("div",{children:["Work preferences: ",Object(r.jsx)(ye.a,{placeholder:"work preferences",name:"lookingForAJobDescription",component:Ue,validate:[]})]}),Object(r.jsxs)("div",{children:["Contacts: ",Object.keys(t.contacts).map((function(e){return Object(r.jsxs)("div",{children:[e,": ",Object(r.jsx)(ye.a,{placeholder:e,name:"contacts.".concat(e),component:ke,validate:[]})]},e)}))]})]})}));function Ie(){var e=Object(c.a)(["\n    font-size: 22px;\n"]);return Ie=function(){return e},e}function Te(){var e=Object(c.a)(["\n    flex: 0 0 65%;\n    margin-left: 20px;\n    @media ","{\n        margin-left: 0px;\n    }\n"]);return Te=function(){return e},e}function Ae(){var e=Object(c.a)(["\n    flex: 0 0 35%;\n"]);return Ae=function(){return e},e}function Me(){var e=Object(c.a)(["\n    display: flex;\n    margin-top:10px;\n    @media ","{\n        flex-direction: column;\n    }\n"]);return Me=function(){return e},e}function Fe(){var e=Object(c.a)(["\n    position: relative;\n    display: inline-block;\n    line-height: 0;\n    max-width: 100%;\n    img{\n        width: 100%;\n        height: auto;\n    }\n    :hover ","{\n            transition: 0.3s;\n            opacity: 0.7;\n    }\n"]);return Fe=function(){return e},e}function Le(){var e=Object(c.a)(['\n    position: absolute;\n    top:0;\n    right:0;\n    background-color: #555;\n    color: lightgrey;\n    font-size: 16px;\n    padding: 1vh;\n    display: block;\n    border: none;\n    cursor: pointer;\n    text-align: center;\n    opacity: 0;\n    transition: 0.3s;\n    line-height: 1;\n    border-radius: 5px;\n    input[type="file"] {\n        display: none;\n    }\n    :hover {\n        color: white;\n        transition: 0.2s;\n    }\n    \n    \n']);return Le=function(){return e},e}var Ne=p.c.label(Le()),ze=p.c.div(Fe(),Ne),De=p.c.div(Me(),(function(e){return e.theme.media.phone})),Re=p.c.div(Ae()),Ge=p.c.div(Te(),(function(e){return e.theme.media.phone})),We=p.c.div(Ie()),Be=function(e){var t=e.profile,n=e.setEditMode,c=e.isOwner,i=e.status,o=e.updateUserStatus;return Object(r.jsxs)("div",{children:[Object(r.jsx)(We,{children:t.fullName}),Object(r.jsx)(we,{status:i,updateUserStatus:o,isOwner:c}),Object(r.jsxs)("div",{children:["About me: ",t.aboutMe]}),Object(r.jsxs)("div",{children:["Looking for a job: ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(r.jsxs)("div",{children:["Work preferences: ",t.lookingForAJobDescription]}),Object(r.jsxs)("div",{children:["Contacts: ",Object.keys(t.contacts).map((function(e){return Object(r.jsx)(Je,{contactType:e,contactInfo:t.contacts[e]},e)}))]}),c&&Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:n,children:"Edit"})})]})},Je=function(e){var t=e.contactType,n=e.contactInfo;return Object(r.jsxs)("div",{children:[t,": ",n]})},He=function(e){var t=e.profile,n=e.savePhoto,c=e.isOwner,o=e.status,a=e.updateUserStatus,s=e.editMode,u=e.setEditMode,l=e.disableEditMode,d=e.saveProfile;if(Object(i.useEffect)((function(){return function(){l()}}),[l]),!t)return Object(r.jsx)(Q,{});return Object(r.jsx)("div",{children:Object(r.jsx)("div",{children:Object(r.jsxs)(De,{children:[Object(r.jsx)(Re,{children:Object(r.jsxs)(ze,{children:[Object(r.jsx)("img",{src:t.photos.large?t.photos.large:ee,alt:"avatar"}),c&&Object(r.jsx)(Ne,{children:Object(r.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&n(e.target.files[0])}})})]})}),Object(r.jsx)(Ge,{children:Object(r.jsxs)("div",{children:[!s&&Object(r.jsx)(Be,{profile:t,setEditMode:u,isOwner:c,status:o,updateUserStatus:a}),s&&Object(r.jsx)(_e,{initialValues:t,onSubmit:function(e){d(e)},profile:t,isOwner:c,cancelSubmit:l})]})})]})})})},Ve=n(67),qe={getProfile:function(e){return I.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return I.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return I.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),I.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfile:function(e){return I.put("profile",e).then((function(e){return e.data}))}},Xe=n(30),Ye="ADD-POST",Ke="SET_USER_PROFILE",Qe="SET_STATUS",Ze="DELETE_POST",$e="SAVE_PHOTO_SUCCESS",et="SET_EDIT_MODE",tt="DISABLE_EDIT_MODE",nt="SAVE_PROFILE_SUCCESS",rt={posts:[{id:1,message:"hey, nibba",likesCount:228},{id:2,message:"get the fuck out",likesCount:9},{id:3,message:"It is my first post",likesCount:3}],profile:null,status:"default status",editMode:!1},ct=function(e){return{type:nt,profile:e}},it=function(e){return{type:Qe,status:e}},ot=function(e){return{type:$e,photos:e}},at=function(){return{type:tt}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return Object(P.a)(Object(P.a)({},e),{},{posts:[].concat(Object(_.a)(e.posts),[{id:5,message:t.newPostText,likesCount:0}])});case Ze:return Object(P.a)(Object(P.a)({},e),{},{posts:Object(_.a)(e.posts.filter((function(e){return e.id!==t.postId})))});case Ke:return Object(P.a)(Object(P.a)({},e),{},{profile:t.profile});case Qe:return Object(P.a)(Object(P.a)({},e),{},{status:t.status});case $e:return Object(P.a)(Object(P.a)({},e),{},{profile:Object(P.a)(Object(P.a)({},e.profile),{},{photos:t.photos})});case et:return Object(P.a)(Object(P.a)({},e),{},{editMode:!0});case tt:return Object(P.a)(Object(P.a)({},e),{},{editMode:!1});case nt:return Object(P.a)(Object(P.a)({},e),{},{profile:t.profile});default:return e}},ut=n(138),lt=n.n(ut),dt=function(e){return Object(r.jsxs)("div",{className:lt.a.item,children:[Object(r.jsx)("img",{src:"https://w7.pngwing.com/pngs/642/857/png-transparent-internet-meme-redemption-white-sticker-meme.png"}),e.message,Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["like ",e.likeCount]})})]})},ft=n(36),jt=Object(ft.a)(10),bt=Object(Pe.a)("textarea"),pt=function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{placeholder:"Enter post",name:"newPostText",component:bt,validate:[ft.b,jt]})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Add post"})})]})};pt=Object(Se.a)({form:"AddNewPostForm"})(pt);var ht=function(e){var t=e.posts.map((function(e){return Object(r.jsx)(dt,{message:e.message,likeCount:e.likesCount},e.id)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"My posts"}),Object(r.jsx)(pt,{onSubmit:function(t){e.addPost(t.newPostText)}}),Object(r.jsx)("div",{children:t})]})},Ot=Object(C.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:function(e){return{type:Ye,newPostText:e}}})(ht),gt=o.a.memo((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(He,Object(P.a)({},e)),Object(r.jsx)(Ot,{})]})})),xt=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props,t=e.match,n=e.authorizedUserId,r=e.history,c=e.getProfile,i=e.setUserStatus,o=t.params.userId;o||(o=n)||r.push("/login"),c(o),i(o)}},{key:"render",value:function(){return Object(r.jsx)(gt,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,editMode:this.props.editMode,setEditMode:this.props.setEditMode,disableEditMode:this.props.disableEditMode})}}]),n}(o.a.Component),mt=Object(ue.d)(Object(C.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.id,editMode:e.profilePage.editMode}}),{getProfile:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.getProfile(e);case 2:r=t.sent,n({type:Ke,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUserStatus:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.getStatus(e);case 2:r=t.sent,n(it(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.updateStatus(e);case 3:0===t.sent.resultCode&&n(it(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Error with status");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.savePhoto(e);case 2:0===(r=t.sent).resultCode&&n(ot(r.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},disableEditMode:at,setEditMode:function(){return{type:et}},saveProfile:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.saveProfile(e);case 2:0===(r=t.sent).resultCode?(n(ct(e)),n(at())):(c=r.messages[0].slice(r.messages[0].indexOf(">")+1,r.messages[0].indexOf(")")).toLocaleLowerCase(),n(Object(Xe.a)("profileEditForm",{contacts:Object(Ve.a)({},c,r.messages[0])})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),S.g)(xt);function vt(){var e=Object(c.a)(["\n    width: ",";\n    img{\n        display: block;\n        width: 100%;\n        height: 100%;\n    }\n"]);return vt=function(){return e},e}function wt(){var e=Object(c.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: "," 0;\n"]);return wt=function(){return e},e}var yt=p.c.header(wt(),(function(e){return e.paddingTopBottom||"5px"})),St=p.c.div(vt(),(function(e){return e.width||"20px"})),Pt=function(e){var t=e.isAuth,n=e.logout,c=e.login;return Object(r.jsxs)(yt,{paddingTopBottom:"10px",children:[Object(r.jsx)(St,{width:"30px",children:Object(r.jsx)("img",{src:"https://i.pinimg.com/originals/9a/3b/90/9a3b902ff415e1a95368f1bf2b9ecca8.png",alt:"logo"})}),Object(r.jsxs)("div",{children:[t&&Object(r.jsxs)("div",{children:[c," - ",Object(r.jsx)("button",{onClick:n,children:"Logout"})]}),!t&&Object(r.jsx)(b.b,{to:"/login",children:"Login"})]})]})},Ct={authMe:function(){return I.get("auth/me").then((function(e){return e.data}))},login:function(e){return I.post("auth/login",e).then((function(e){return e.data}))},logout:function(){return I.delete("auth/login").then((function(e){return e.data}))}},Et={getCaptchaUrl:function(){return I.get("security/get-captcha-url").then((function(e){return e.data}))}},kt="SET_USER_AUTH_DATA",Ut="SET_CAPTCHA_URL_SUCCESS",_t="DELETE_USER_AUTH_DATA",It={id:null,login:null,email:null,isAuth:!1,captchaUrl:null},Tt=function(e){return{type:kt,data:e}},At=function(e){return{type:Ut,data:e}},Mt=function(){return function(){var e=Object(U.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct.authMe();case 2:0===(n=e.sent).resultCode&&t(Tt(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ft=function(){return function(){var e=Object(U.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.getCaptchaUrl();case 2:n=e.sent,t(At(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kt:return Object(P.a)(Object(P.a)(Object(P.a)({},e),t.data),{},{isAuth:!0});case Ut:return Object(P.a)(Object(P.a)({},e),{},{captchaUrl:t.data});case _t:return Object(P.a)(Object(P.a)({},e),{},{id:null,login:null,email:null,isAuth:!1});default:return e}},Nt=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Pt,Object(P.a)({},this.props))}}]),n}(o.a.Component),zt=Object(C.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(){var e=Object(U.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct.logout();case 2:0===e.sent.resultCode&&t({type:_t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Nt),Dt=Object(Pe.a)("input"),Rt=Object(ft.a)(20),Gt=Object(Se.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{placeholder:"Email",name:"email",component:Dt,validate:[ft.b,Rt]})}),Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{placeholder:"Password",name:"password",component:Dt,type:"password",validate:[ft.b,Rt]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(ye.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me"]}),e.captchaUrl&&Object(r.jsx)("img",{src:e.captchaUrl,alt:"captcha"}),e.captchaUrl&&Object(r.jsx)("div",{children:Object(r.jsx)(ye.a,{placeholder:"Captcha",name:"captcha",component:Dt,validate:[ft.b]})}),e.error&&Object(r.jsx)("div",{className:Ee.a.formSummaryError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})),Wt=Object(C.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e){return function(){var t=Object(U.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct.login(e);case 2:0===(r=t.sent).resultCode?n(Mt()):(10===r.resultCode&&n(Ft()),n(Object(Xe.a)("login",{_error:r.messages.length>0?r.messages[0]:"Some error"})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){if(e.isAuth)return Object(r.jsx)(S.a,{to:"/Profile"});return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(Gt,{onSubmit:function(t){e.login(t)},captchaUrl:e.captchaUrl})]})})),Bt="INITIALIZING_SUCCESS",Jt={isInitialized:!1},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bt:return Object(P.a)(Object(P.a)({},e),{},{isInitialized:!0});default:return e}},Vt=n(126),qt=n(129),Xt=n(139),Yt=Object(ue.c)({profilePage:st,dialogsPage:Vt.b,usersPage:Y,auth:Lt,form:qt.a,app:Ht}),Kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,Qt=Object(ue.e)(Yt,Kt(Object(ue.a)(Xt.a))),Zt=Qt;window.__store__=Qt;var $t=function(e){return function(t){return Object(r.jsx)(o.a.Suspense,{fallback:Object(r.jsx)(Q,{}),children:Object(r.jsx)(e,Object(P.a)({},t))})}};function en(){var e=Object(c.a)(["\n    height: 15vh;\n    text-align: center; \n"]);return en=function(){return e},e}var tn=p.c.footer(en()),nn=function(){return Object(r.jsx)(tn,{children:Object(r.jsx)("h2",{children:"Footer"})})};function rn(){var e=Object(c.a)(["\n    position: relative;\n    width: 100%;\n    padding-right: 15px;\n    padding-left: 15px;\n    flex: 0 0 80%;\n    max-width: 80%;\n    background: lemonchiffon;\n    @media ","{\n        flex: 1 0 100%;\n        max-width: 100%;\n    }\n"]);return rn=function(){return e},e}function cn(){var e=Object(c.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    margin-right: -15px;\n    margin-left: -15px;\n    flex-grow: 1; \n    @media ","{\n        flex-direction: column;\n    }\n"]);return cn=function(){return e},e}function on(){var e=Object(c.a)(["\n    display: flex;\n    flex-direction: column;\n    width:100%;\n    max-width:1200px;\n    padding-right: 15px;\n    padding-left: 15px;\n    margin-left:auto;\n    margin-right:auto;\n    background-color: aliceblue;\n    min-height: 100vh;\n"]);return on=function(){return e},e}var an=p.c.div(on()),sn=p.c.div(cn(),(function(e){return e.theme.media.phone})),un=p.c.div(rn(),(function(e){return e.theme.media.phone})),ln=o.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),dn=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).catchAllUnhandledErrors=function(e,t){alert(e.message)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.initialize(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.isInitialized?Object(r.jsxs)(an,{children:[Object(r.jsx)(zt,{}),Object(r.jsxs)(sn,{children:[Object(r.jsx)(m,{}),Object(r.jsx)(un,{children:Object(r.jsxs)(S.d,{children:[Object(r.jsx)(S.b,{path:"/dialogs",render:$t(ln)}),Object(r.jsx)(S.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(mt,{})}}),Object(r.jsx)(S.b,{path:"/news",render:function(){return Object(r.jsx)(v,{})}}),Object(r.jsx)(S.b,{path:"/music",render:function(){return Object(r.jsx)(w,{})}}),Object(r.jsx)(S.b,{path:"/settings",render:function(){return Object(r.jsx)(y,{})}}),Object(r.jsx)(S.b,{path:"/users",render:function(){return Object(r.jsx)(xe,{})}}),Object(r.jsx)(S.b,{path:"/login",render:function(){return Object(r.jsx)(Wt,{})}}),Object(r.jsx)(S.a,{exact:!0,from:"/",to:"/profile"}),Object(r.jsx)(S.b,{path:"*",render:function(){return Object(r.jsx)("div",{children:"404 NOT FOUND"})}})]})})]}),Object(r.jsx)(nn,{})]}):Object(r.jsx)(Q,{})}}]),n}(o.a.Component),fn=Object(ue.d)(Object(C.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initialize:function(){return function(e){var t=e(Mt());Promise.all([t]).then((function(){e({type:Bt})}))}}}))(dn),jn=function(){return Object(r.jsx)(b.a,{children:Object(r.jsx)(C.a,{store:Zt,children:Object(r.jsx)(fn,{})})})};function bn(){var e=Object(c.a)(['\n        *,\n        *::before,\n        *::after {\n            box-sizing: border-box;\n        }\n        html {\n            font-family: sans-serif;\n            line-height: 1.15;\n            -webkit-text-size-adjust: 100%;\n            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n        }\n        body {\n            margin: 0;\n            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n            font-size: 1rem;\n            font-weight: 400;\n            line-height: 1.5;\n            color: #212529;\n            text-align: left;\n            background-color: #fff;\n        }\n']);return bn=function(){return e},e}var pn=Object(p.b)(bn()),hn={media:{phone:"(max-width: 900px)"}},On=function(){u.a.render(Object(r.jsxs)(p.a,{theme:hn,children:[Object(r.jsx)(pn,{}),Object(r.jsx)(jn,{})]}),document.getElementById("root"))};On(),Zt.subscribe(On),a()},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var r=function(e){if(!e)return"Field is required"},c=function(e){return function(t){if(!(t.length<=e))return"Max length is ".concat(e)}}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),c=n(3),i=n(140),o=(n(1),n(42)),a=n.n(o),s=function(e){return function(t){var n=t.input,o=t.meta,s=Object(i.a)(t,["input","meta"]),u=o.touched&&o.error;return Object(r.jsxs)("div",{className:a.a.formControl+" "+(u?a.a.error:""),children:[Object(r.jsx)("div",{children:Object(r.jsx)(e,Object(c.a)(Object(c.a)({},n),s))}),u&&Object(r.jsxs)("span",{children:[" ",o.error," "]})]})}}},42:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2YQaU",error:"FormsControls_error__3g4FW",formSummaryError:"FormsControls_formSummaryError__PAkJW"}},91:function(e,t,n){e.exports={avatar:"User_avatar__2LoF5",user:"User_user__1f7S8"}},92:function(e,t,n){e.exports={pageNumber:"Pagination_pageNumber__3nXTM",selectedPage:"Pagination_selectedPage__38Dd4"}}},[[292,1,2]]]);
//# sourceMappingURL=main.fec8970e.chunk.js.map